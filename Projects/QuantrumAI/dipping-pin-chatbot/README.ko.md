# Dipping - Pin ì±—ë´‡ ì‹œìŠ¤í…œ

## ğŸ¯ í”„ë¡œì íŠ¸ ë°°ê²½

**í”„ë¡œì íŠ¸ëª…**: Pin (í•€í¬ì¸íŠ¸ë¡œ ì•Œë ¤ì£¼ëŠ” ì±—ë´‡)

**ë¬¸ì œì **: ì£¼ì‹ ì´ˆë³´ì(ì£¼ë¦°ì´)ê°€ ìš©ì–´, ì‹œì¥ ìƒí™©, ë‰´ìŠ¤ë¥¼ ì´í•´í•˜ê¸° ì–´ë ¤ì›€

**í•´ê²°ì±…**: AI ì±—ë´‡ìœ¼ë¡œ ì£¼ë¦°ì´ì—ê²Œ ë§ì¶¤í˜• ì •ë³´ë¥¼ ì‰½ê²Œ ì œê³µ

**í•µì‹¬ ê°€ì¹˜**: "ì£¼ë¦°ì´ë¥¼ ìœ„í•œ í•€í¬ì¸íŠ¸ ì •ë³´ ì œê³µ"

**ëª…í™•í•œ ì •ì˜**: ì±—ë´‡ (ì—ì´ì „íŠ¸ ì•„ë‹˜!)
- âœ… **ì±—ë´‡**: ì •ë³´ ì¡°íšŒ ë° ì „ë‹¬ë§Œ ìˆ˜í–‰
- âŒ **ì—ì´ì „íŠ¸**: ìŠ¤ìŠ¤ë¡œ í–‰ë™ ìˆ˜í–‰ (ìë™ ë§¤ë§¤ ë“±)
- **ê¸ˆìœµ ê·œì œ ì¤€ìˆ˜**: ë§¤ë§¤ ê°™ì€ í–‰ë™ì€ ì¼ì ˆ í•˜ì§€ ì•ŠìŒ

---

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### LLM
- **ëª¨ë¸**: Gemini 2.0 Flash Exp
- **ë°©ì‹**: ì™¸ë¶€ API í˜¸ì¶œ (Google ê³µì‹)
- **ë¹„ìš©**: ë¬´ë£Œ (í•˜ë£¨ 1,500íšŒ)
- **í†µí•©**: LangChainìœ¼ë¡œ Agent/Chain êµ¬ì„±

### ë°±ì—”ë“œ
- **í”„ë ˆì„ì›Œí¬**: Django 5.1
- **ì–¸ì–´**: Python 3.10
- **ê°€ìƒí™˜ê²½**: conda (dipping)
- **ORM**: Django ORM + PostgreSQL

### í”„ë¡ íŠ¸ì—”ë“œ
- **í”„ë ˆì„ì›Œí¬**: React 19 + TypeScript
- **ë¹Œë“œ ë„êµ¬**: Vite
- **ìƒíƒœê´€ë¦¬**: Context API

### í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **LangChain 0.2.16**: Agent/Chain êµ¬ì„± (1.0 í˜¸í™˜ì„± ë¬¸ì œë¡œ ë‹¤ìš´ê·¸ë ˆì´ë“œ)
- **langchain-google-genai**: Gemini í†µí•©
- **PostgreSQL**: ë©”ì¸ DB (ë‰´ìŠ¤, ê°ì„±ë¶„ì„ ê²°ê³¼)
- **ì£¼ë¦°ì´ ì‚¬ì „**: JSON ê¸°ë°˜ 250ê°œ ìš©ì–´ (FAISS ë¶ˆí•„ìš”)

### ë°ì´í„° ì†ŒìŠ¤
1. **ì£¼ë¦°ì´ ì‚¬ì „**: 250ê°œ ê¸ˆìœµ ìš©ì–´ (JSON, ê°„ë‹¨í•œ ê²€ìƒ‰)
2. **í•œíˆ¬ API**: ì‹¤ì‹œê°„ ì£¼ê°€ ë°ì´í„°
3. **ë‰´ìŠ¤ API**: ì£¼ì‹ ê´€ë ¨ ë‰´ìŠ¤ (ì˜ë¬¸)
4. **EODHD API**: ê¸ˆìœµ ìº˜ë¦°ë” ë°ì´í„°

---

## ğŸ’» ë‚´ ì—­í• 

**íŒ€ ë‚´ Pin ì±—ë´‡ 100% ì „ë‹´ ê°œë°œ**
- ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„
- LangChain + Gemini í†µí•©
- ReAct Agent êµ¬í˜„
- Django API ê°œë°œ
- React ì±—ë´‡ UI ê°œë°œ

**ì—­í•  ë¶„ë¥˜**: ë°±ì—”ë“œ 70% + ML 30%
- **ë°±ì—”ë“œ ì—”ì§€ë‹ˆì–´ (ë©”ì¸)**: Django API, RAG íŒŒì´í”„ë¼ì¸, ë²¡í„° DB êµ¬ì¶•
- **ML ì—”ì§€ë‹ˆì–´ (ì„œë¸Œ)**: ì„ë² ë”© ëª¨ë¸ ì„ íƒ, í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
- **í•µì‹¬ ê¹¨ë‹¬ìŒ**: RAGëŠ” ìš”ì¦˜ ë°±ì—”ë“œ ì˜ì—­ìœ¼ë¡œ í¡ìˆ˜ë˜ëŠ” ì¶”ì„¸

---

## ğŸ— ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°: í•˜ë‚˜ì˜ Gemini + ì—¬ëŸ¬ LangChain íŒŒì´í”„ë¼ì¸

```
                Gemini 2.0 Flash (í•˜ë‚˜ì˜ ëª¨ë¸)
                        â†‘
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                   â”‚                   â”‚
LangChain 1         LangChain 2         LangChain 3
(ì±—ë´‡ìš©)            (ê°ì„±ë¶„ì„ìš©)         (ì‹œì¥ìš”ì•½ìš©)
    â†‘                   â†‘                   â†‘
/api/chatbot      /api/news/sentiment   /api/market/summary
    â†‘                   â†‘                   â†‘
React ì±—ë´‡         React ë‰´ìŠ¤í˜ì´ì§€     React ëŒ€ì‹œë³´ë“œ
```

**í•µì‹¬ ê°œë…**:
- í•˜ë‚˜ì˜ Gemini ëª¨ë¸ì„ ì—¬ëŸ¬ LangChain íŒŒì´í”„ë¼ì¸ì—ì„œ ê³µìœ 
- ê° APIëŠ” ë…ë¦½ì ì¸ LangChain êµ¬ì„±
- ìš©ë„ë³„ ë§ì¶¤ í”„ë¡¬í”„íŠ¸

---

## ğŸ”§ í•µì‹¬ êµ¬í˜„ ë‚´ìš©

### 1. ì±—ë´‡ í”Œë¡œìš° (ReAct Agent)

**ReAct**: Reasoning (ìƒê°) + Acting (í–‰ë™)ì„ ë°˜ë³µí•˜ëŠ” AI íŒ¨í„´

**í•µì‹¬ íŒ¨í„´**: Thought â†’ Action â†’ Observation â†’ Answer

**ì˜ˆì‹œ 1: ìš©ì–´ ì§ˆë¬¸**
```
ì‚¬ìš©ì: "PERì´ ë­ì˜ˆìš”?"
         â†“
[Thought] ì§ˆë¬¸ ë¶„ë¥˜
"ìš©ì–´ ì„¤ëª…ì´ë„¤ â†’ ë²¡í„° DB ê²€ìƒ‰"
         â†“
[Action] ë„êµ¬ ì‹¤í–‰
ë²¡í„° DBì—ì„œ "PER" ê²€ìƒ‰
         â†“
[Observation] ê²°ê³¼ í™•ì¸
"PER = ì£¼ê°€ìˆ˜ìµë¹„ìœ¨..."
         â†“
[Thought] ì„¤ëª… ë°©ì‹ ê²°ì •
"ì´ˆë³´ìê°€ ì´í•´í•˜ë„ë¡ ì‰½ê²Œ ì„¤ëª…"
         â†“
[Answer] Gemini ë‹µë³€ ìƒì„±
"PERì€ ì£¼ê°€ìˆ˜ìµë¹„ìœ¨ì´ì—ìš”. ì‰½ê²Œ ë§í•˜ë©´..."
         â†“
ì‚¬ìš©ìì—ê²Œ ì „ë‹¬
```

**ì˜ˆì‹œ 2: ì‹¤ì‹œê°„ ì •ë³´ ì§ˆë¬¸**
```
ì‚¬ìš©ì: "ì˜¤ëŠ˜ ê²½ì œ ì§€í‘œëŠ”?"
         â†“
[Thought] ì§ˆë¬¸ ë¶„ë¥˜
"ê²½ì œ ìº˜ë¦°ë” DB ì¡°íšŒ í•„ìš”"
         â†“
[Action] DB ì¡°íšŒ
PostgreSQLì—ì„œ today ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
         â†“
[Observation] ê²°ê³¼ í™•ì¸
"CPI ë°œí‘œ ìˆìŒ"
         â†“
[Thought] ì„¤ëª… ë°©ì‹ ê²°ì •
"ì´ˆë³´ìê°€ ì´í•´í•˜ë„ë¡ ì‰½ê²Œ ì„¤ëª…"
         â†“
[Answer] Gemini ë‹µë³€ ìƒì„±
"ì˜¤ëŠ˜ì€ ë¯¸êµ­ ì†Œë¹„ìë¬¼ê°€ì§€ìˆ˜..."
         â†“
ì‚¬ìš©ìì—ê²Œ ì „ë‹¬
```

#### A. ì§ˆë¬¸ ë¶„ë¥˜ (Thought)

```python
# ì§ˆë¬¸ ìœ í˜• ìë™ íŒë‹¨
if "ìš©ì–´" in query:
    tool = "ë²¡í„° DB"  # ì£¼ë¦°ì´ ì‚¬ì „
elif "ì£¼ê°€" in query:
    tool = "í•œíˆ¬ API"  # ì‹¤ì‹œê°„ ì‹œì„¸
elif "ë‰´ìŠ¤" in query:
    tool = "ë‰´ìŠ¤ API"
```

#### B. ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (Action)

```python
# LangChain Tool ì •ì˜
from langchain.tools import Tool

tools = [
    Tool(
        name="ì£¼ë¦°ì´ì‚¬ì „",
        func=vector_db_search,
        description="ì£¼ì‹ ìš©ì–´ ì„¤ëª…"
    ),
    Tool(
        name="ì£¼ê°€ì¡°íšŒ",
        func=stock_api_call,
        description="ì‹¤ì‹œê°„ ì£¼ê°€ ë°ì´í„°"
    ),
    Tool(
        name="ë‰´ìŠ¤ê²€ìƒ‰",
        func=news_api_call,
        description="ìµœì‹  ë‰´ìŠ¤"
    )
]
```

#### C. ReAct Agent êµ¬ì„±

```python
from langchain.agents import create_react_agent
from langchain_google_genai import ChatGoogleGenerativeAI

# Gemini ëª¨ë¸
llm = ChatGoogleGenerativeAI(
    model="gemini-2.0-flash-exp",
    temperature=0.7
)

# ReAct Agent ìƒì„±
agent = create_react_agent(
    llm=llm,
    tools=tools,
    prompt=react_prompt  # "ì´ˆë³´ìì—ê²Œ ì‰½ê²Œ ì„¤ëª…"
)
```

---

### 2. ë‰´ìŠ¤ ê°ì„±ë¶„ì„ í”Œë¡œìš°

```
ì˜ë¬¸ ë‰´ìŠ¤ ìˆ˜ì§‘ (ë‰´ìŠ¤ API)
         â†“
[LangChain PromptTemplate]
"ì´ ë‰´ìŠ¤ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ê³ ,
 ê¸ì •/ë¶€ì •/ì¤‘ë¦½ ë¹„ìœ¨ ë¶„ì„í•´ì¤˜"
         â†“
Geminiì—ê²Œ ì „ë‹¬
         â†“
ê²°ê³¼ JSON íŒŒì‹±
{
  "translated": "ë²ˆì—­ëœ ë‚´ìš©",
  "sentiment": {
    "positive": 0.7,
    "negative": 0.2,
    "neutral": 0.1
  }
}
         â†“
PostgreSQL ì €ì¥
```

#### êµ¬í˜„ ì½”ë“œ

```python
from langchain.prompts import PromptTemplate
from langchain.chains import LLMChain

# í”„ë¡¬í”„íŠ¸ í…œí”Œë¦¿
prompt = PromptTemplate(
    input_variables=["news_text"],
    template="""
    ë‹¤ìŒ ë‰´ìŠ¤ë¥¼ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ê³  ê°ì„± ë¶„ì„í•´ì¤˜:
    {news_text}

    ê²°ê³¼ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ:
    {{
      "translated": "ë²ˆì—­",
      "sentiment": {{"positive": 0.0, "negative": 0.0, "neutral": 0.0}}
    }}
    """
)

# LLMChain ìƒì„±
chain = LLMChain(llm=llm, prompt=prompt)

# ì‹¤í–‰
result = chain.run(news_text="Apple stock rises...")
```

---

### 3. ì‹œì¥ ìš”ì•½ í”Œë¡œìš°

```
ë‰´ìŠ¤ + ì£¼ìš” ì§€ìˆ˜ ë°ì´í„° ìˆ˜ì§‘
         â†“
[LangChain PromptTemplate]
"ì˜¤ëŠ˜ ì‹œì¥ì„ ì£¼ë¦°ì´ê°€ ì´í•´í•˜ë„ë¡
 3ì¤„ë¡œ ìš”ì•½í•´ì¤˜"
         â†“
Geminiì—ê²Œ ì „ë‹¬
         â†“
3ì¤„ ìš”ì•½ ìƒì„±
"1. ë¯¸êµ­ ì¦ì‹œ ìƒìŠ¹...
 2. ë°˜ë„ì²´ ê°•ì„¸...
 3. ê¸ˆë¦¬ ì¸í•˜ ê¸°ëŒ€..."
         â†“
React ëŒ€ì‹œë³´ë“œ í‘œì‹œ
```

#### êµ¬í˜„ ì½”ë“œ

```python
prompt = PromptTemplate(
    input_variables=["news", "indices"],
    template="""
    ì˜¤ëŠ˜ ì‹œì¥ ìƒí™©:
    ë‰´ìŠ¤: {news}
    ì§€ìˆ˜: {indices}

    ì£¼ë¦°ì´ê°€ ì´í•´í•  ìˆ˜ ìˆê²Œ 3ì¤„ë¡œ ìš”ì•½í•´ì¤˜.
    """
)

chain = LLMChain(llm=llm, prompt=prompt)
summary = chain.run(news=news_data, indices=index_data)
```

---

## ğŸ”€ 3ê°œ ë…ë¦½ API êµ¬ì¡°

**API 1: `/api/chatbot`** - ì‚¬ìš©ì ëŒ€í™” ì‘ë‹µ (ReAct Agent)
- ë²¡í„° DB (ì£¼ë¦°ì´ ì‚¬ì „), í•œíˆ¬ API, ë‰´ìŠ¤ API ì—°ë™

**API 2: `/api/news/sentiment`** - ë‰´ìŠ¤ ë²ˆì—­ + ê°ì„±ë¶„ì„
- PromptTemplate + LLMChainìœ¼ë¡œ ê¸ì •/ë¶€ì •/ì¤‘ë¦½ ë¶„ì„

**API 3: `/api/market/summary`** - ì˜¤ëŠ˜ ì‹œì¥ ìš”ì•½
- ë‰´ìŠ¤ + ì£¼ìš” ì§€ìˆ˜ë¥¼ 3ì¤„ ìš”ì•½

---

## ğŸ“Š ë°ì´í„° íë¦„

```
[ì‚¬ìš©ì ì§ˆë¬¸]
       â†“
[Django API]
       â†“
[LangChain Agent] â† ì§ˆë¬¸ ë¶„ë¥˜ (Thought)
       â†“
[Tool ì‹¤í–‰] â† ë°ì´í„° ìˆ˜ì§‘ (Action)
  â”œâ†’ ë²¡í„° DB
  â”œâ†’ í•œíˆ¬ API
  â””â†’ ë‰´ìŠ¤ API
       â†“
[Gemini] â† ë‹µë³€ ìƒì„±
       â†“
[Django Response]
       â†“
[React UI]
       â†“
[ì‚¬ìš©ì]
```

---

## ğŸ”‘ í•µì‹¬ ê¸°ìˆ  ê²°ì •

### 0. RAG ë³¸ì§ˆ ì´í•´

**í•µì‹¬ ê¹¨ë‹¬ìŒ**: DB ì¡°íšŒ, API í˜¸ì¶œ, ì¸í„°ë„· ê²€ìƒ‰ â†’ ëª¨ë‘ RAG!

**RAG = Retrieval (ê²€ìƒ‰) + Augmented (ê°•í™”) + Generation (ìƒì„±)**

```
ì‚¬ìš©ì ì§ˆë¬¸
    â†“
ì™¸ë¶€ì—ì„œ ì •ë³´ ê²€ìƒ‰ (ì–´ë””ì„œë“ !)
    â†“
ê²€ìƒ‰ ê²°ê³¼ë¥¼ GPTì—ê²Œ ì „ë‹¬
    â†“
GPTê°€ ê²€ìƒ‰ ê²°ê³¼ ê¸°ë°˜ìœ¼ë¡œ ë‹µë³€ ìƒì„±
```

**ë””í•‘ ì±—ë´‡ì˜ RAG êµ¬ì„±**:
1. **ë‚´ë¶€ ì§€ì‹ DB** (ë²¡í„° DB): ì£¼ë¦°ì´ ì‚¬ì „ 250ê°œ ìš©ì–´
2. **API í˜¸ì¶œ**: í•œíˆ¬ API (ì‹¤ì‹œê°„ ì£¼ê°€), ë‰´ìŠ¤ API
3. **DB ì¡°íšŒ**: PostgreSQL (ê²½ì œ ìº˜ë¦°ë”, ê°ì„±ë¶„ì„ ê²°ê³¼)

**ì°¨ì´ì **: "ì–´ë””ì„œ ê²€ìƒ‰í•˜ëŠëƒ"ë§Œ ë‹¤ë¥¼ ë¿, ëª¨ë‘ RAG íŒ¨í„´!

**RAG + í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§ = ìµœê°• ì¡°í•©**

```python
# 1. RAG: ì •í™•í•œ ì •ë³´ ê²€ìƒ‰
stock_data = fetch_stock_price("ì‚¼ì„±ì „ì")

# 2. í”„ë¡¬í”„íŠ¸: ì‰¬ìš´ ì„¤ëª…ìœ¼ë¡œ ë³€í™˜
prompt = f"""
ë„ˆëŠ” ì£¼ì‹ ì´ˆë³´ìë¥¼ ìœ„í•œ ì„ ìƒë‹˜ì´ì•¼.

[ì‹¤ì‹œê°„ ì •ë³´]
ì‚¼ì„±ì „ì í˜„ì¬ê°€: {stock_data['price']}ì›

ìœ„ ì •ë³´ë¥¼ ì¤‘í•™ìƒë„ ì´í•´í•  ìˆ˜ ìˆê²Œ ì„¤ëª…í•´ì¤˜.
"""

answer = llm.generate(prompt)
```

â†’ ë‘˜ì€ ë…ë¦½ì´ ì•„ë‹ˆë¼ **ìƒí˜¸ ë³´ì™„** ê´€ê³„!

---

### 1. LangChain ë²„ì „: 0.2.16 ì„ íƒ

**ë¬¸ì œ**: LangChain 1.0ì€ í˜¸í™˜ì„± ë¬¸ì œ ë°œìƒ

**í•´ê²°**:
```bash
pip install langchain==0.2.16
pip install langchain-google-genai
```

**ì´ìœ **:
- ì•ˆì •ì ì¸ ë¬¸ì„œì™€ ì˜ˆì œ
- `create_react_agent` API ì§€ì›
- Gemini í†µí•© ì›í™œ

---

### 2. ì£¼ë¦°ì´ ì‚¬ì „: ê°„ë‹¨í•œ ê²€ìƒ‰ (FAISS ëŒ€ì‹ )

**ê·œëª¨**: 250ê°œ ê¸ˆìœµ ìš©ì–´ (JSON ê¸°ë°˜)

**í•µì‹¬ ê²°ì •**: FAISS ë¶ˆí•„ìš”
- ê°„ë‹¨í•œ í‚¤ì›Œë“œ ë§¤ì¹­ìœ¼ë¡œ ì¶©ë¶„ (0.001ì´ˆ)
- ê° ìš©ì–´ë§ˆë‹¤ ì •ì˜ + ì˜ˆì‹œ í¬í•¨ (ì˜ˆì‹œì˜ ì„íŒ©íŠ¸ê°€ í¼)
- í™•ì¥ ì‹œ Django ORM â†’ Elasticsearch ê³ ë ¤

---

### 3. React useChatBot ì»¤ìŠ¤í…€ í›…

**í•µì‹¬ ê¸°ëŠ¥**: AbortControllerë¡œ 30ì´ˆ íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬

```typescript
const useChatBot = () => {
  const [messages, setMessages] = useState<Message[]>([]);
  const abortControllerRef = useRef<AbortController | null>(null);

  const sendMessage = useCallback(async (text: string) => {
    abortControllerRef.current = new AbortController();
    setTimeout(() => abortControllerRef.current?.abort(), 30000);

    const response = await fetch('/api/chat/', {
      signal: abortControllerRef.current.signal
    });
    // ë¡œë”© ë©”ì‹œì§€ ê´€ë¦¬ + ì—ëŸ¬ ì²˜ë¦¬
  }, []);

  return { messages, sendMessage };
};
```

**ì£¼ìš” íŒ¨í„´**:
- âœ… useCallbackìœ¼ë¡œ í•¨ìˆ˜ ìµœì í™”
- âœ… useRefë¡œ AbortController ì €ì¥ (ë¦¬ë Œë”ë§ ë°©ì§€)
- âœ… 30ì´ˆ íƒ€ì„ì•„ì›ƒ ìë™ ì²˜ë¦¬

---

### 4. Gemini API ì„ íƒ (ë¡œì»¬ LLM ëŒ€ì‹ )

**í•µì‹¬ ê²°ì •**: ë¡œì»¬ LLM(LLaMA, GPT-OSS) ëŒ€ì‹  Gemini API

**ì„ íƒ ì´ìœ **:
- í•˜ë“œì›¨ì–´ ì œì•½ (LLaMA 120BëŠ” 22GB RAM í•„ìš”, ë§¥ë¶ 18GB ë¶€ì¡±)
- ë¹ ë¥¸ ì†ë„ + ë¬´ë£Œ (1,500íšŒ/ì¼)
- ë™ì‹œ ì²˜ë¦¬ ë¬´ì œí•œ (ë¡œì»¬ì€ 1ëª…ë§Œ)
- íŒ€ í˜‘ì—… ìš©ì´ (ì¬í˜„ ê°€ëŠ¥ì„±)

**íŠ¸ë ˆì´ë“œì˜¤í”„**: API ì˜ì¡´ì„± vs ì‹¤ìš©ì„± â†’ ì‹¤ìš©ì„± ì„ íƒ


---

## ğŸ¨ í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜ íŒ¨í„´

### ChatBotWrapper - ê´€ì‹¬ì‚¬ ë¶„ë¦¬ (SoC)

**ë¬¸ì œ**: ëª¨ë“  í˜ì´ì§€ì—ì„œ ì±—ë´‡ í‘œì‹œ ì¡°ê±´ ë°˜ë³µ

**âŒ Wrapper ì—†ìœ¼ë©´**:
```tsx
// ê° í˜ì´ì§€ë§ˆë‹¤ ì¤‘ë³µ
{(location.pathname === '/main' ||
  location.pathname === '/stock' ||
  location.pathname === '/news') && <ChatBot />}
```

**âœ… Wrapper ìˆìœ¼ë©´**:
```tsx
<ChatBotWrapper allowedPages={['/main', '/stock', '/news']} />
```

**êµ¬í˜„**:
```tsx
interface ChatBotWrapperProps {
  allowedPages: string[];
}

const ChatBotWrapper: React.FC<ChatBotWrapperProps> = ({ allowedPages }) => {
  const location = useLocation();

  if (!allowedPages.includes(location.pathname)) {
    return null;  // í—ˆìš©ë˜ì§€ ì•Šì€ í˜ì´ì§€ì—ì„  ë Œë”ë§ ì•ˆ í•¨
  }

  return <ChatBot />;
};
```

**ì¥ì **:
- âœ… **ê´€ì‹¬ì‚¬ ë¶„ë¦¬**: ChatBotì€ "ëŒ€í™”", WrapperëŠ” "ë¼ìš°íŒ…"
- âœ… **ì½”ë“œ ì¬ì‚¬ìš©**: DRY ì›ì¹™ (Don't Repeat Yourself)
- âœ… **ìœ ì§€ë³´ìˆ˜ ìš©ì´**: í˜ì´ì§€ ì¶”ê°€ ì‹œ allowedPagesë§Œ ìˆ˜ì •
- âœ… **ê°€ë…ì„± í–¥ìƒ**: ì˜ë„ê°€ ëª…í™•í•¨

**ë¹„ìœ **:
- ChatBot = ì§ì› (ì¼ë§Œ í•¨)
- ChatBotWrapper = ì¶œì… í†µì œ (ì–´ë”” ë°°ì¹˜í• ì§€ ê²°ì •)

---

## ğŸ— Django API ì—°ê²° êµ¬ì¡°

### URL ë¼ìš°íŒ… 2ë‹¨ê³„

```
POST /api/chat/
    â†“
1ë‹¨ê³„: config/urls.py
path('api/', include('chatbot_app.urls'))
â†’ "api/ ë°œê²¬! chatbot_appìœ¼ë¡œ ì´ë™"
    â†“
2ë‹¨ê³„: chatbot_app/urls.py
path('chat/', views.chat, name='chat')
â†’ "chat/ ë°œê²¬! views.chat() ì‹¤í–‰"
    â†“
views.py ì²˜ë¦¬
```

**í•µì‹¬ ì›ë¦¬**: URLì„ ë‹¨ê³„ë³„ë¡œ ë‚˜ëˆ ì„œ ê´€ë¦¬
- **ì¥ì **: ì•±ë³„ë¡œ ë…ë¦½ì  ê´€ë¦¬, ì½”ë“œ ì •ë¦¬ ê¹”ë”
- **name ì‚¬ìš©**: URL í•˜ë“œì½”ë”© ëŒ€ì‹  ë³„ëª…ìœ¼ë¡œ ê´€ë¦¬

### ì‹±ê¸€í†¤ íŒ¨í„´ ì ìš©

**ë¬¸ì œ**: ë§¤ ìš”ì²­ë§ˆë‹¤ ì±—ë´‡ ìƒì„± â†’ ëŠë¦¼

**í•´ê²°**: ì±—ë´‡ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•œ ë²ˆë§Œ ìƒì„±í•˜ê³  ì¬ì‚¬ìš©

```python
# views.py
_chatbot_instance = None  # ì „ì—­ ë³€ìˆ˜

def get_chatbot():
    global _chatbot_instance
    if _chatbot_instance is None:
        # ì²˜ìŒ í•œ ë²ˆë§Œ ìƒì„± (ë¬´ê±°ìš´ ì‘ì—…)
        _chatbot_instance = create_chatbot()
    return _chatbot_instance  # ì¬ì‚¬ìš©

@api_view(['POST'])
def chat(request):
    chatbot = get_chatbot()  # ë¹ ë¦„!
    response = chatbot.invoke({"input": message})
    return Response({"response": response['output']})
```

**íš¨ê³¼**:
- âœ… Gemini API ì—°ê²° 1íšŒë§Œ
- âœ… Agent ìƒì„± 1íšŒë§Œ
- âœ… ì‘ë‹µ ì†ë„ ëŒ€í­ í–¥ìƒ

### ê°œë°œ vs í”„ë¡œë•ì…˜ ì „ëµ

**ê°œë°œ ë‹¨ê³„** (í˜„ì¬):
```python
@permission_classes([AllowAny])  # ë¡œê·¸ì¸ ì—†ì´ í…ŒìŠ¤íŠ¸
```

**í”„ë¡œë•ì…˜ ë‹¨ê³„** (ë°°í¬ ì „):
```python
@permission_classes([IsAuthenticated])  # í† í° í•„ìˆ˜
```

**ì´ìœ **:
- ê°œë°œ: ì±—ë´‡ ë¡œì§ë§Œ ë¹ ë¥´ê²Œ ê²€ì¦
- ë°°í¬: ì¸ì¦ ì‹œìŠ¤í…œ ì—°ê²° (1ì¤„ ìˆ˜ì •ìœ¼ë¡œ ì „í™˜)

---

## ğŸ’¡ ë°°ìš´ ì 

### ê¸°ìˆ ì  ë°°ì›€

**1. LangChainì˜ ê°•ë ¥í•¨**
- Agent íŒ¨í„´ìœ¼ë¡œ ë™ì  ë„êµ¬ ì„ íƒ
- PromptTemplateë¡œ ì¬ì‚¬ìš©ì„± ì¦ê°€
- Chainìœ¼ë¡œ ë³µì¡í•œ í”Œë¡œìš° êµ¬ì„±

**2. ReAct íŒ¨í„´**
- Thought â†’ Action â†’ Observation ë°˜ë³µ
- AIê°€ ìŠ¤ìŠ¤ë¡œ ë„êµ¬ ì„ íƒ
- íˆ¬ëª…í•œ ì˜ì‚¬ê²°ì • ê³¼ì •

**3. í•˜ë‚˜ì˜ ëª¨ë¸, ì—¬ëŸ¬ ìš©ë„**
- Gemini í•˜ë‚˜ë¡œ ì±—ë´‡, ê°ì„±ë¶„ì„, ìš”ì•½ ëª¨ë‘ ì²˜ë¦¬
- LangChainìœ¼ë¡œ ìš©ë„ë³„ íŒŒì´í”„ë¼ì¸ êµ¬ì„±
- ë¹„ìš© ì ˆê° + ì¼ê´€ì„± ìœ ì§€

**4. ì‹¤ìš©ì  ê¸°ìˆ  ì„ íƒ**
- 250ê°œ ìš©ì–´ëŠ” FAISS ë¶ˆí•„ìš” â†’ ê°„ë‹¨í•œ ê²€ìƒ‰
- ë¡œì»¬ LLM vs API â†’ ì†ë„ì™€ í’ˆì§ˆë¡œ API ì„ íƒ
- LangChain 1.0 ë¬¸ì œ â†’ 0.2.16 ë‹¤ìš´ê·¸ë ˆì´ë“œë¡œ í•´ê²°
- ì™„ë²½ë³´ë‹¤ ì‹¤ìš©ì„± ìš°ì„ 

**5. íƒ€ì„ì•„ì›ƒ ì²˜ë¦¬ì˜ ì¤‘ìš”ì„±**
- AbortControllerë¡œ 30ì´ˆ íƒ€ì„ì•„ì›ƒ ì„¤ì •
- LLM ì‘ë‹µ ì§€ì—° ì‹œ ì‚¬ìš©ì ê²½í—˜ ë³´í˜¸
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ ì¥ì•  ëŒ€ë¹„

**6. í”„ë¡œí† íƒ€ì… ìš°ì„  ì „ëµ**
- í•˜ë“œì½”ë”© ë°ì´í„°ë¡œ ë¨¼ì € ì „ì²´ í”Œë¡œìš° ê²€ì¦
- ì‘ë™ í™•ì¸ í›„ ì‹¤ì œ API ì—°ê²°
- Top-Down ë°©ì‹: ì‘ì€ ì „ì²´ â†’ í° ì „ì²´
- 80% ì´í•´ë¡œ ë„˜ì–´ê°€ë„ ê´œì°®ìŒ (ë‚˜ë¨¸ì§€ëŠ” ì‹¤ì „ì—ì„œ)

### ì„¤ê³„ ë°°ì›€

**1. API ë¶„ë¦¬**
- ì±—ë´‡, ê°ì„±ë¶„ì„, ìš”ì•½ì„ ë…ë¦½ APIë¡œ ë¶„ë¦¬
- ê° APIëŠ” ë…ë¦½ì  LangChain êµ¬ì„±
- ìœ ì§€ë³´ìˆ˜ ì‰¬ì›€

**2. ì£¼ë¦°ì´ ì¤‘ì‹¬ ì„¤ê³„**
- "ì‰½ê²Œ ì„¤ëª…" í”„ë¡¬í”„íŠ¸ í•µì‹¬
- ìš©ì–´ ì‚¬ì „ ë²¡í„° DB êµ¬ì¶•
- ë§ì¶¤í˜• ì •ë³´ ì œê³µ

---

## ğŸ”— ê´€ë ¨ ê°œë…

- [React Hooks](../../../Concepts/react-hooks/): useState, useEffect, useRef ë“± React Hooks ê¸°ì´ˆ
- [Django ë°±ì—”ë“œ íŒ¨í„´](../../../Concepts/django-backend-patterns/): Django ORM, API ê°œë°œ
- [Django REST Framework ê¸°ì´ˆ](../../../Concepts/django-rest-framework-basics/): DRF ViewSet, Serializer

---

## ğŸ”— ë‹¤ìŒ ë‹¨ê³„

### Phase 1 (í˜„ì¬)
- [x] ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì„¤ê³„
- [x] LangChain 0.2.16 í™˜ê²½ êµ¬ì¶•
- [x] ì£¼ë¦°ì´ ì‚¬ì „ ë°ì´í„° êµ¬ì¡° ì„¤ê³„ (250ê°œ ìš©ì–´)
- [x] React useChatBot ì»¤ìŠ¤í…€ í›… êµ¬í˜„
- [ ] ReAct Agent ì™„ì „ êµ¬í˜„
- [ ] ì£¼ë¦°ì´ ì‚¬ì „ ì„ë² ë”© ì™„ë£Œ

### Phase 2
- [ ] ë‰´ìŠ¤ ê°ì„±ë¶„ì„ API ì™„ì„±
- [ ] ì‹œì¥ ìš”ì•½ API ì™„ì„±
- [ ] 3ê°œ API í†µí•© í…ŒìŠ¤íŠ¸

### Phase 3
- [ ] React ì±—ë´‡ UI ê°œë°œ
- [ ] ëŒ€ì‹œë³´ë“œ í†µí•©
- [ ] ì‚¬ìš©ì í”¼ë“œë°± ë°˜ì˜

---

## â“ ë©´ì ‘ ì˜ˆìƒ ì§ˆë¬¸

**Q1: ReAct Agentê°€ ë­”ê°€ìš”?**
> A: Reasoning(ìƒê°)ê³¼ Acting(í–‰ë™)ì„ ë°˜ë³µí•˜ëŠ” AI íŒ¨í„´ì…ë‹ˆë‹¤. AIê°€ ì§ˆë¬¸ì„ ë¶„ì„(Thought)í•˜ê³ , í•„ìš”í•œ ë„êµ¬ë¥¼ ì„ íƒí•˜ì—¬ ì‹¤í–‰(Action)í•˜ê³ , ê²°ê³¼ë¥¼ í™•ì¸(Observation)í•œ ë’¤ ë‹µë³€ì„ ìƒì„±í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ "ì‚¼ì„±ì „ì ì£¼ê°€"ë¼ëŠ” ì§ˆë¬¸ì— AIê°€ ìŠ¤ìŠ¤ë¡œ ì£¼ê°€ APIë¥¼ ì„ íƒí•˜ì—¬ í˜¸ì¶œí•©ë‹ˆë‹¤.

**Q2: LangChainì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ”?**
> A: LLMì„ ì‰½ê²Œ í†µí•©í•˜ê³  ë³µì¡í•œ í”Œë¡œìš°ë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤. Agent íŒ¨í„´ìœ¼ë¡œ ë™ì  ë„êµ¬ ì„ íƒ, PromptTemplateë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬, Chainìœ¼ë¡œ ì—¬ëŸ¬ ë‹¨ê³„ë¥¼ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Geminië¥¼ ì§ì ‘ í˜¸ì¶œí•˜ëŠ” ê²ƒë³´ë‹¤ êµ¬ì¡°í™”ë˜ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ìŠµë‹ˆë‹¤.

**Q3: í•˜ë‚˜ì˜ Geminië¡œ ì—¬ëŸ¬ ê¸°ëŠ¥ì„ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ë‚˜ìš”?**
> A: LangChainìœ¼ë¡œ ìš©ë„ë³„ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„±í•©ë‹ˆë‹¤. ì±—ë´‡ì€ ReAct Agent, ê°ì„±ë¶„ì„ì€ LLMChain with PromptTemplate, ìš”ì•½ë„ LLMChainì„ ì‚¬ìš©í•˜ì§€ë§Œ ê°ê° ë‹¤ë¥¸ í”„ë¡¬í”„íŠ¸ë¡œ Geminië¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. ê°™ì€ ëª¨ë¸ì´ì§€ë§Œ í”„ë¡¬í”„íŠ¸ê°€ ë‹¤ë¥´ë©´ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**Q4: ë²¡í„° DBëŠ” ì™œ í•„ìš”í•œê°€ìš”?**
> A: ì£¼ì‹ ìš©ì–´ ì‚¬ì „(ì£¼ë¦°ì´ ì‚¬ì „)ì„ ì„ë² ë”©í•˜ì—¬ ì˜ë¯¸ ê¸°ë°˜ ê²€ìƒ‰ì„ í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ "PER"ì„ ë¬¼ì–´ë³´ë©´ ë²¡í„° DBì—ì„œ ìœ ì‚¬í•œ ìš©ì–´ë¥¼ ê²€ìƒ‰í•˜ì—¬ ì •í™•í•œ ì„¤ëª…ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨ìˆœ í‚¤ì›Œë“œ ê²€ìƒ‰ë³´ë‹¤ ì˜ë¯¸ë¥¼ ì´í•´í•˜ëŠ” ê²€ìƒ‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.

**Q5: 3ê°œ APIë¥¼ ë…ë¦½ì ìœ¼ë¡œ ë§Œë“  ì´ìœ ëŠ”?**
> A: ê° ê¸°ëŠ¥ì´ ë…ë¦½ì ìœ¼ë¡œ í™•ì¥ ê°€ëŠ¥í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ì„œì…ë‹ˆë‹¤. ì±—ë´‡, ê°ì„±ë¶„ì„, ìš”ì•½ì€ ìš©ë„ì™€ ìš”êµ¬ì‚¬í•­ì´ ë‹¤ë¦…ë‹ˆë‹¤. í•˜ë‚˜ì˜ APIì— ëª¨ë‘ ë„£ìœ¼ë©´ ë³µì¡í•´ì§€ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë µìŠµë‹ˆë‹¤. ë…ë¦½ APIëŠ” í…ŒìŠ¤íŠ¸ë„ ì‰½ê³  ë‚˜ì¤‘ì— ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ì¬ì‚¬ìš©ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
dipping-pin-chatbot/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ chatbot/
â”‚   â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”‚   â””â”€â”€ react_agent.py
â”‚   â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”‚   â”œâ”€â”€ vector_db.py
â”‚   â”‚   â”‚   â”œâ”€â”€ stock_api.py
â”‚   â”‚   â”‚   â””â”€â”€ news_api.py
â”‚   â”‚   â””â”€â”€ views.py
â”‚   â”œâ”€â”€ sentiment/
â”‚   â”‚   â”œâ”€â”€ chains/
â”‚   â”‚   â”‚   â””â”€â”€ sentiment_chain.py
â”‚   â”‚   â””â”€â”€ views.py
â”‚   â”œâ”€â”€ summary/
â”‚   â”‚   â”œâ”€â”€ chains/
â”‚   â”‚   â”‚   â””â”€â”€ summary_chain.py
â”‚   â”‚   â””â”€â”€ views.py
â”‚   â””â”€â”€ manage.py
â””â”€â”€ frontend/
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ components/
    â”‚   â”‚   â””â”€â”€ Chatbot.tsx
    â”‚   â””â”€â”€ api/
    â”‚       â””â”€â”€ services/
    â”‚           â””â”€â”€ chatbotService.ts
    â””â”€â”€ package.json
```

---

**í˜„ì¬ ìƒíƒœ**: ğŸ”„ Phase 1 ì§„í–‰ ì¤‘ (ì•„í‚¤í…ì²˜ ì„¤ê³„ ì™„ë£Œ)
**ë‹´ë‹¹**: ë°”ë‹¤ (QuantrumAI íŒ€ ë‚´ Pin ì±—ë´‡ 100% ì „ë‹´)
