# Patron - 핵심 의사결정 과정 (Q&A)

## 📋 목차
1. 데이터 설계 결정
2. 사용자 경험(UX) 관련 결정
3. 차별화 전략
4. 추가 기능 설계
5. 실수/혼동했던 부분
6. 법적/윤리적 고려사항

---

## 1. 데이터 설계 결정

### Q: 정규화가 왜 필요한가?

**핵심 개념**:
```python
# 정규화 전
애플: $150 → $153 (절대값 작음)
테슬라: $2000 → $2060 (절대값 큼)
→ 차트 이미지 생성 시 완전히 다른 모양!

# 정규화 후 (0~1)
애플: 0.0 → 0.02
테슬라: 0.0 → 0.02
→ 둘 다 "+2% 패턴"으로 동일하게 인식
```

**중요**:
- 정규화는 "숫자 단계"에서 먼저 해야 함
- 이미지 생성 후 픽셀 정규화는 이미 늦음

**학습 포인트**:
> 데이터 전처리 순서: 정규화 → 시각화 → 학습

---

## 2. 사용자 경험(UX) 관련 결정

### Q: 사용자 입력 처리 - 축 크롭을 누가?

**결정: 사용자가 크롭, 배경선은 모델이 처리**

**이유**:
- 핸드폰 캡처 편집 기능으로 축 크롭 충분히 쉬움
- 정확도 향상 (노이즈 제거)
- 배경선/그리드는 CNN이 무시 가능 (강건성)

**UI 안내**:
```
✅ 캔들 차트만 보이게 크롭
✅ 축, 날짜, 가격 숫자 제거
✅ 배경선/그리드는 OK
```

**학습 포인트**:
> 사용자가 할 수 있는 것 vs 시스템이 해야 할 것을 명확히 구분

---

### Q: TOP N개를 몇 개로?

**결정: TOP 3개**

**이유**:
- 주린이 타겟: 너무 많으면 overwhelm
- 3개면 비교 가능 + 패턴 파악 가능
- 모바일 UI 고려

---

## 3. 차별화 전략

### Q: 기존 "주식 차트 패턴 인식"과 뭐가 다른가?

**기존 프로젝트들**:
1. **패턴 분류형**: "이건 Head & Shoulder입니다" → 그래서?
2. **가격 예측형**: "내일 $152입니다" → 규제 위험 + 신뢰 문제

**우리 프로젝트 (차별점)**:
```
검색 기반 + 과거 사례 제시

출력:
"NVIDIA 2023-05와 95% 유사
 그때는 3개월 후 +45% 상승

 산업: Technology - Semiconductors
 변동성: 높음
 시장 상관도: 0.85"
```

**5가지 핵심 차별점**:
1. 분류(classify) 아닌 검색(search)
2. 크로스 종목/산업 검색 (테슬라 ↔ 넷플릭스)
3. 구체적 과거 사례
4. 통계적 인사이트 (과거 사례 분석)
5. 주린이 친화 풀스택 서비스

**학습 포인트**:
> "정보 제공" vs "투자 권유"의 차이를 명확히

---

## 4. 추가 기능 설계

### 변동성 점수

**정의**: 12주 동안 일평균 가격 변화폭

```python
volatility = ((High - Low).mean() / Close.mean()) × 100

# 분류
낮음: <2% (안정적, 주린이 친화적)
보통: 2~4%
높음: >4% (롤러코스터, 주의)
```

**의미**: "이 패턴이 얼마나 널뛰었는지"
- 높음: 심장 약한 주린이 주의
- 낮음: 비교적 안정적

**가치**: 같은 수익률이라도 변동성 다르면 체감 다름

---

### 시장 상관관계

**정의**: 나스닥/S&P 500 지수와 얼마나 같이 움직였는지

```python
# 피어슨 상관계수 (-1 ~ 1)
import numpy as np
correlation = np.corrcoef(stock_returns, index_returns)[0, 1]

# 해석
1.0: 완전 동일
0.8~1.0: 거의 같이 움직임 (시장 따라감) ✅
0.5~0.8: 어느정도 영향
0~0.5: 독립적 움직임 (시장 무시)
```

**주린이 표현**:
```
높음: "시장 전체 흐름과 거의 같이 움직였어요"
낮음: "시장과 무관하게 독자적으로 움직였어요"
```

**구현 난이도**: 중간 (3-4시간)

---

### 산업 태그 활용 전략

**결정: 표시용으로만 사용 (필터링 X)**

**이유**:
- 크로스 산업 인사이트 = 핵심 가치
- "테슬라가 넷플릭스랑 비슷?" 같은 발견이 진짜 재미

**자동 수집**:
```python
import yfinance as yf

ticker = yf.Ticker("AAPL")
sector = ticker.info['sector']  # 'Technology'
industry = ticker.info['industry']  # 'Consumer Electronics'

# 라벨링 제로! API 호출 1번 추가만
```

**UI 표시**:
```
1. 🔧 NVIDIA (Technology) - 95%
2. 📱 Apple (Technology) - 93%
3. 🎬 Netflix (Communication) - 92% 🌟
   💡 다른 산업에서도 발견!
```

**학습 포인트**:
> 데이터를 "필터"가 아닌 "인사이트"로 활용

---

## 5. 실수/혼동했던 부분

### 축 제거 vs 정규화

**착각**: "축 제거하면 정규화 안 해도 되나?"

**정답**: 완전히 별개!
- 축 제거 = 이미지 시각적 처리
- 정규화 = 숫자 데이터 전처리 (필수!)

---

### 이미지 먼저 vs 정규화 먼저

**올바른 순서**: 정규화 → 이미지 생성 → 학습

**이유**: 이미지 생성 후 정규화는 이미 늦음

---

### 크롭 vs 패딩

**크롭**: 큰 이미지 → 중앙만 자르기

**패딩**: 작은 이미지 → 여백 추가

---

## 6. 법적/윤리적 고려사항

### 표현 가이드

```
❌ 금지 (투자 권유):
"이 주식 사세요"
"100% 오를 것입니다"

✅ 허용 (정보 제공):
"과거 이런 패턴이 있었어요"
"통계적으로 이런 경향이 있었습니다"
```

### 면책 문구 필수

```
⚠️ 투자 유의사항
과거 패턴이 미래를 보장하지 않습니다.
투자 판단은 본인 책임입니다.
```

---

## 7. 핵심 교훈

### 데이터 과학
1. **다양성이 품질을 이긴다** (2020년 코로나 포함)
2. **정규화 타이밍이 중요하다** (숫자 단계에서!)
3. **학습과 표현을 분리하라** (그레이스케일 학습, 컬러 표시)

### 제품 설계
1. **사용자 경험 > 약간의 정확도** (크롭 요구)
2. **차별점 = 조합의 신선함** (검색+통계+크로스)
3. **주린이 관점에서 생각하기** (TOP 3, 직관적 표현)

### 개발 전략
1. **완벽 추구보다 빠른 검증**
2. **기존 도구 최대 활용** (ResNet18 전이학습)
3. **자동화 가능한 건 자동화** (산업 태그 API)

---

**현재 상태**: ✅ Phase 1 완료 (데이터 전처리)
**다음 목표**: 🔄 Phase 2 진행 중 (AI 모델 학습)
